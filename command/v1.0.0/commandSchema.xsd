<?xmlversion="1.0"encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
           xmlns:vc="http://www.w3.org/2007/XMLSchema-versioning"
           xmlns:tns="http://schemas.strande.ai/command/v1.0.0"
           targetNamespace="http://schemas.strande.ai/command/v1.0.0"
           elementFormDefault="qualified"
           vc:minVersion="1.1">

<!--Therootelement:<commands>-->
<xs:elementname="commands">
<xs:complexType>
<xs:sequence>
<!--Containsoneormore<command-group>elements-->
<xs:elementname="command-group"type="CommandGroupElement"minOccurs="1"maxOccurs="unbounded"/>
</xs:sequence>
</xs:complexType>
</xs:element>

<!--Thedefinitionfora<command-group>element-->
<xs:complexTypename="CommandGroupElement">
<xs:sequence>
<!--Containsoneormore<command>elements-->
<xs:elementname="command"type="CommandElement"minOccurs="1"maxOccurs="unbounded"/>
</xs:sequence>
<!--Hasamandatory'name'attribute-->
<xs:attributename="name"type="xs:string"use="required"/>
</xs:complexType>

<!--Thedefinitionforasingle<command>element-->
<xs:complexTypename="CommandElement">

<!--Masterlistofallpossibleattributes(alllowercase)-->

<xs:attributename="type"type="CommandType"use="required"/>

<!--SpELconditiontodeterminewhetherthecommandstepshouldrunornot-->
<!--Usedby:assistant,mail,method,print,prompt,redirect,save,script,suggestion,update,validate-->
<xs:attributename="condition"type="xs:string"use="optional"/>

<!--Thefieldnameforthesuggestion-->
<!--Usedby:suggestion,update-->
<xs:attributename="field"type="xs:string"use="optional"/>

<!--ThemessagetobetemporarilysetinmetaData-->
<!--Usedby:prompt,suggestion-->
<xs:attributename="message"type="xs:string"use="optional"/>

<!--Methodcall(e.g.,'BeanName.methodName')-->
<!--Usedby:method,redirect,update,validate-->
<xs:attributename="method"type="xs:string"use="optional"/>

<!--Trueorfalse,whethertheusershouldberedirectedtothemessage-->
<!--Usedby:mail-->
<xs:attributename="open"type="xs:string"use="optional"/>

<!--Thenameofthereportfiletobedefaulted-->
<!--Usedby:print-->
<xs:attributename="report"type="xs:string"use="optional"/>

<!--JSScriptvalue-->
<!--Usedby:redirect,script,update,validate-->
<xs:attributename="script"type="xs:string"use="optional"/>

<!--TrueofFalse,whetherthemessageshouldbeautomaticallysent-->
<!--Usedby:mail-->
<xs:attributename="send"type="xs:string"use="optional"/>

<!--error,warningorinfo-->
<!--Usedby:validate-->
<xs:attributename="severity"type="xs:string"use="optional"/>

<!--SpElLconditionreturningtrueorfalse-->
<!--Usedby:validate-->
<xs:attributename="test"type="xs:string"use="optional"/>

<!--thetitleoftheprompt-->
<!--Usedby:prompt-->
<xs:attributename="title"type="xs:string"use="optional"/>

<!--SpELvalue-->
<!--Usedby:redirect,update-->
<xs:attributename="value"type="xs:string"use="optional"/>

<!--Theassistantviewname-->
<!--Usedby:assistant-->
<xs:attributename="view"type="xs:string"use="optional"/>

<!--Thecommandgrouptoexecuteiftheuserdecisionisfalse-->
<!--Usedby:prompt-->
<xs:attributename="falsecommand"type="xs:string"use="optional"/>

<!--Thedisplaynameforafalsevalue-->
<!--Usedby:prompt-->
<xs:attributename="falselabel"type="xs:string"use="optional"/>

<!--Thedisplaynameforatruevalue-->
<!--Usedby:prompt-->
<xs:attributename="truelabel"type="xs:string"use="optional"/>

<!--
=====================================================================
==ADVANCEDXSD1.1VALIDATIONLOGIC==
=====================================================================
Thisblockenforcestype-specificrulesforattributes.
The'condition'attributeisuniversallyallowedandthusexcluded
fromthe'not(exists(...))'checks.
NOTE:CommentsareinXPath(:...:)syntax.
-->
<xs:asserttest="

(:1.Assistant:)
if(@type='assistant')then
(
exists(@view)and
not(exists(@fieldor@messageor@methodor@openor@reportor@scriptor@sendor@severityor@testor@titleor@valueor@falsecommandor@falselabelor@truelabel))
)

(:2.Mail:)
elseif(@type='mail')then
(
not(exists(@fieldor@messageor@methodor@reportor@scriptor@severityor@testor@titleor@valueor@viewor@falsecommandor@falselabelor@truelabel))
)

(:3.Method:)
elseif(@type='method')then
(
exists(@method)and
not(exists(@fieldor@messageor@openor@reportor@scriptor@sendor@severityor@testor@titleor@valueor@viewor@falsecommandor@falselabelor@truelabel))
)

(:4.Print:)
elseif(@type='print')then
(
exists(@report)and
not(exists(@fieldor@messageor@methodor@openor@scriptor@sendor@severityor@testor@titleor@valueor@viewor@falsecommandor@falselabelor@truelabel))
)

(:5.Prompt:)
elseif(@type='prompt')then
(
exists(@title)andexists(@message)andexists(@truelabel)andexists(@falselabel)and
not(exists(@fieldor@methodor@openor@reportor@scriptor@sendor@severityor@testor@valueor@view))
)

(:6.Redirect:)
elseif(@type='redirect')then
(
(count(@value)+count(@script)+count(@method))=1and
not(exists(@fieldor@messageor@openor@reportor@sendor@severityor@testor@titleor@viewor@falsecommandor@falselabelor@truelabel))
)

(:7.Save:)
elseif(@type='save')then
(
not(exists(@fieldor@messageor@methodor@openor@reportor@scriptor@sendor@severityor@testor@titleor@valueor@viewor@falsecommandor@falselabelor@truelabel))
)

(:8.Script:)
elseif(@type='script')then
(
exists(@script)and
not(exists(@fieldor@messageor@methodor@openor@reportor@sendor@severityor@testor@titleor@valueor@viewor@falsecommandor@falselabelor@truelabel))
)

(:9.Suggestion:)
elseif(@type='suggestion')then
(
exists(@field)andexists(@message)and
not(exists(@methodor@openor@reportor@scriptor@sendor@severityor@testor@titleor@valueor@viewor@falsecommandor@falselabelor@truelabel))
)

(:10.Update:)
elseif(@type='update')then
(
exists(@field)and
(count(@value)+count(@script)+count(@method))=1and
not(exists(@messageor@openor@reportor@sendor@severityor@testor@titleor@viewor@falsecommandor@falselabelor@truelabel))
)

(:11.Validate:)
elseif(@type='validate')then
(
exists(@severity)and
(count(@test)+count(@script)+count(@method))=1and
not(exists(@fieldor@messageor@openor@reportor@sendor@titleor@valueor@viewor@falsecommandor@falselabelor@truelabel))
)

(:Default:)
else
true()
"/>

</xs:complexType>

<!--Enumerationofallvalidcommandtypes(alllowercase)-->
<xs:simpleTypename="CommandType">
<xs:restrictionbase="xs:string">
<xs:enumerationvalue="assistant"/>
<xs:enumerationvalue="mail"/>
<xs:enumerationvalue="method"/>
<xs:enumerationvalue="print"/>
<xs:enumerationvalue="prompt"/>
<xs:enumerationvalue="redirect"/>
<xs:enumerationvalue="save"/>
<xs:enumerationvalue="script"/>
<xs:enumerationvalue="suggestion"/>
<xs:enumerationvalue="update"/>
<xs:enumerationvalue="validate"/>
</xs:restriction>
</xs:simpleType>

</xs:schema>
